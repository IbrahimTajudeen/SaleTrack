<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SaleTrack.Views.DashboardPage"
             Title="DashboardPage"
             >
    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="16">

            <!-- Header -->
            <Grid ColumnDefinitions="*,Auto">
                <VerticalStackLayout>
                    <Label Text="Dashboard"
                           FontSize="22"
                           FontAttributes="Bold" />

                    <HorizontalStackLayout Spacing="4">
                        <Label Text="Logged in as"
                               FontSize="13" />
                        <Label Text="{Binding Username}"
                               FontAttributes="Bold"
                               FontSize="13" />
                        <Label Text="("
                               FontSize="13" />
                        <Label Text="{Binding Role}"
                               FontAttributes="Bold"
                               FontSize="13" />
                        <Label Text=")"
                               FontSize="13" />
                        
                    </HorizontalStackLayout>
                </VerticalStackLayout>

                <HorizontalStackLayout Grid.Column="1" Spacing="8">
                    <Button Text="Sales"
                            BackgroundColor="#0D6EFD"
                            Command="{Binding SaleCommand}"
                            CornerRadius="10" />

                    <Button Text="Reports"
                            BackgroundColor="White"
                            BorderColor="#0D6EFD"
                            BorderWidth="1"
                            Command="{Binding ReportCommand}"
                            CornerRadius="10" />
                </HorizontalStackLayout>
            </Grid>

            <!-- Stats Cards -->
            <Grid ColumnDefinitions="*,*,*" ColumnSpacing="12">

                <!-- Today Sales -->
                <Frame Grid.Column="0"
                       CornerRadius="12"
                       HasShadow="True"
                       BorderColor="Transparent"
                       Padding="20" >
                    <VerticalStackLayout>
                        <Label Text="Today Sales"
                               FontSize="14"
                               TextColor="Gray" />
                        <Label Text="{Binding TodaySales}"
                               FontSize="25"
                               FontAttributes="Bold"
                               TextColor="Green" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Month Sales -->
                <Frame Grid.Column="1"
                       CornerRadius="12"
                       HasShadow="True"
                       Padding="15,20">
                    <VerticalStackLayout>
                        <Label Text="This Month"
                               FontSize="13"
                               TextColor="Gray" />
                        <Label Text="{Binding MonthSales}"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor="#0D6EFD" />
                    </VerticalStackLayout>
                </Frame>

                <!-- All Sales -->
                <Frame Grid.Column="2"
                       CornerRadius="12"
                       HasShadow="True"
                       Padding="15,20">
                    <VerticalStackLayout>
                        <Label Text="All Sales"
                               FontSize="13"
                               TextColor="Gray" />
                        <Label Text="{Binding AllSales}"
                               FontSize="20"
                               FontAttributes="Bold" />
                    </VerticalStackLayout>
                </Frame>

            </Grid>

            <!-- Recent Sales -->
            <Frame CornerRadius="12"
                   HasShadow="True"
                   Padding="0" BorderColor="Transparent">

                <VerticalStackLayout Padding="5">

                    <Label Text="Last 5 Recent Sales"
                           FontSize="16"
                           FontAttributes="Bold"
                           Padding="12" />

                    <CollectionView ItemsSource="{Binding RecentSales}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame Margin="10" CornerRadius="2" BorderColor="#111">
                                    <Grid Padding="10,0"
                                          ColumnDefinitions="*,Auto,Auto"
                                          RowDefinitions="Auto">
                                        
                                        <VerticalStackLayout>
                                            <Label Text="{Binding ItemName}"
                                                   FontAttributes="Bold" />
                                            <Label Text="{Binding Date}"
                                                   FontSize="12"
                                                   TextColor="Gray" />
                                        </VerticalStackLayout>

                                        <Label Grid.Column="1"
                                                   Text="{Binding Quantity}"
                                                   Margin="10,0"
                                                   HorizontalOptions="Center"
                                                   VerticalOptions="Center" />

                                        <Label Grid.Column="2"
                                                   Text="{Binding Amount}"
                                                   FontAttributes="Bold"
                                                   TextColor="Green"
                                                   HorizontalOptions="End"
                                                   VerticalOptions="Center" />
                                    </Grid>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                </VerticalStackLayout>

            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>